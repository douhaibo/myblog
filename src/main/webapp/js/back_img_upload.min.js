layui.use("upload",function(){var b=layui.upload;var c=$("#imgList"),a=b.render({elem:"#btn-select",url:"/myblog/uploadImg",accept:"images",acceptMime:"image/*",multiple:true,auto:false,size:16,bindAction:"#upload",choose:function(e){var d=this.files=e.pushFile();e.preview(function(g,h,f){var i=$(['<tr id="upload-'+g+'">',"<td>"+h.name+"</td>","<td>"+(h.size/1014).toFixed(1)+"kb</td>","<td>等待上传</td>","<td>",'<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>','<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>',"</td>","</tr>"].join(""));i.find(".demo-reload").on("click",function(){e.upload(g,h)});i.find(".demo-delete").on("click",function(){delete d[g];i.remove();a.config.elem.next()[0].value=""});c.append(i)})},done:function(f,e,d){if(f.success===1){var h=c.find("tr#upload-"+e),g=h.children();g.eq(2).html('<span style="color: #5FB878;">上传成功</span>');g.eq(3).html("");return delete this.files[e]}this.error(e,d)},error:function(e,d){var g=c.find("tr#upload-"+e),f=g.children();f.eq(2).html('<span style="color: #FF5722;">上传失败</span>');f.eq(3).find(".demo-reload").removeClass("layui-hide")}})});