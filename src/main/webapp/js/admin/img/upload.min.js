layui.use("upload",function(){var a=layui.upload;var b=$("#imgList");uploadListIns=a.render({elem:"#btn-select",url:"/myblog/img/uploadImg",accept:"images",acceptMime:"image/*",multiple:true,auto:false,size:16,bindAction:"#upload",choose:function(d){var c=this.files=d.pushFile();d.preview(function(f,g,e){var h=$(['<tr id="upload-'+f+'">',"<td>"+g.name+"</td>","<td>"+(g.size/1014).toFixed(1)+"kb</td>","<td>等待上传</td>","<td>",'<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>','<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>',"</td>","</tr>"].join(""));h.find(".demo-reload").on("click",function(){d.upload(f,g)});h.find(".demo-delete").on("click",function(){delete c[f];h.remove();uploadListIns.config.elem.next()[0].value=""});b.append(h)})},done:function(e,d,c){if(e.success===1){var g=b.find("tr#upload-"+d),f=g.children();f.eq(2).html('<span style="color: #5FB878;">上传成功</span>');f.eq(3).html("");return delete this.files[d]}this.error(d,c)},error:function(c){var e=b.find("tr#upload-"+c),d=e.children();d.eq(2).html('<span style="color: #FF5722;">上传失败</span>');d.eq(3).find(".demo-reload").removeClass("layui-hide")}})});